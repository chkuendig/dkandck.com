<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>ScrollTrigger - Scroll based animations with ease</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Erik Terwan">

    <link href="css/style.css" rel="stylesheet">
    <link href="css/demo.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <script src="js/ScrollTrigger.min.js"></script>
    <script src="worldwind.js" type="text/javascript"></script>
    <script src="helloWorldWind.js" type="text/javascript"></script>
    <script src="CustomGoToAnimator.js" type="text/javascript"></script>
    <style>
        div#title {
		background-color:rgb(47 53 75);
    }
	#title h1{
        font-size: 4em;
        font-weight: normal;
		font-family: 'Lato', sans-serif;
		color: rgb(232,210,131);
        		margin:0;
                text-transform: uppercase; 
		padding:0;
		top: 10%;
		position: relative;
		z-index: 99;
	}

#canvasOne {
width:100%;
height:100%;
}
</style>

    <script type="text/javascript">


        document.addEventListener('DOMContentLoaded', function () {
            //  initializeMap()
        window.wwd =   launchGlobe();
            var dest = {latitude:47.36667,longitude: 8.55,altitude:100};
        var animator =  wwd.goToAnimator.goTo(dest);
            var trigger = new ScrollTrigger({
                addHeight: true
            });
            var loop = function (scrollLeft, scrollTop, width, height) {
                // you can do anything now with the height of the viewport
                // or the scrollPosition in the scrollElement.
                // if you are done with the callback you can detach it
                // using the ScrollTrigger.detach() method.
                var blockCnt = document.getElementsByClassName("block").length
                var pos = (scrollTop / height) / (blockCnt - 1)
             /*   console.log({ scrollLeft: scrollLeft, scrollTop: scrollTop, width: width, height: height, pos: pos,modulo:scrollTop%height })*/
             pageScroll=scrollTop%height
             page=(scrollTop-pageScroll)/height
             pageProgress=pageScroll/height

                console.log({page:page, pageProgress: pageProgress })
           
               var canvasContainer= document.getElementById("canvasContainer")
               if(page == 0){
                   
                canvasContainer.classList.remove("globe");
               canvasContainer.style.top = 50-(50-2)*pageProgress+"%"
               canvasContainer.style.left = 0-(0-2)*pageProgress+"%"
               canvasContainer.style.width = 
"calc("+100*(1-pageProgress)+"% + "+30*pageProgress+"vh)"

               canvasContainer.style.height = 
"calc("+50*(1-pageProgress)+"% + "+30*pageProgress+"vh)"
               wwd.navigator.tilt = 60*(1-pageProgress)

               animator(pageProgress*100)
            } else 
            {
                canvasContainer.classList.add("globe");
            }
                //  jumpToPos(pos)
                /*var pos = 
                jumpToPos(pos)*/
                //trigger.detach(loop);
            };

            trigger.attach(loop);
        });

    </script>
    <style>
    #canvasContainer {
position:fixed;
top:50%;
left:0px;
z-index: 10;

width:100%;
height:50%;

/*transition:700ms ease-in-out;*/


}
#canvasContainer.globe {
    position:fixed;
top:2%;
left:2%;
width:125;
height:125;



z-index: 99;
}
</style></style>
</head>

<body>
    <div id="canvasContainer">
        <canvas id="canvasOne">
            Your browser does not support HTML5 Canvas.
        </canvas>
        <div style="        width:100%;        height:100%;z-index:100;position:absolute;top:0;left:0"><!-- make sure to not allow any events to bubble to the globe--></div>

    </div>

    <div class="block" id="title">

        <h1 data-scroll="toggle(.scaleUpIn, .scaleUpOut)" data-scroll-showCallback="showSection(0)"
            data-scroll-hideCallback="hideSection(0)">Let us take you on a journey...</h1>

        <svg viewBox="0 0 60 60" style='z-index: 102;'>
            <path d="M52.254 18.327c0.816-0.804 2.127-0.804 2.937 0s0.813 2.103 0 2.907l-23.724 23.49c-0.81 0.804-2.121 0.804-2.937 0l-23.724-23.49c-0.81-0.804-0.81-2.103 0-2.907 0.813-0.804 2.127-0.804 2.937 0l22.257 21.423 22.254-21.423z"></path>
        </svg>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.fromTopIn, .fromTopOut)">CSS Animations</h1>
        <h2 data-scroll="toggle(.fromBottomIn, .fromBottomOut)">All animations are triggered by classes, so you can
            take advantage of the power that CSS3 animations give you.</h2>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.fromLeftIn, .fromLeftOut)">Vanilla JS</h1>
        <h2 data-scroll="toggle(.fromRightIn, .fromRightOut)">It's written in vanilla javascript, so you can use it
            with any framework.</h2>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.scaleDownIn, .scaleDownOut)">Request Animation Frame</h1>
        <h2 data-scroll="toggle(.fromBottomIn, .fromBottomOut)">It uses the window.requestAnimationFrame method so it
            doesn't jack the users scroll. Animations are triggered when the browser is ready for it.</h2>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.fromRightIn, .fromRightOut)">Simple syntax</h1>
        <h2 data-scroll="toggle(.fromLeftIn, .fromLeftOut)">You define the options inside the HTML attribute, so after
            you have initialised the ScrollTrigger you don't have to touch JavaScript again.</h2>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.fromRightIn, .fromRightOut)">Custom<span></span>izable</h1>
        <h2 data-scroll="toggle(.fromLeftIn, .fromLeftOut)">ScrollTrigger offers a range of options, from calling
            custom JavaScript functions to defining custom offsets and classes.</h2>
        <h3 data-scroll="toggle(.fromRightIn, .fromRightOut)" data-scroll-showCallback="counter">You scrolled past this
            block <span>0</span> times.</h3>
    </div>
    <div class="block">
        <h1 data-scroll="toggle(.fromRightIn, .fromRightOut) once">Versatile</h1>
        <h2 data-scroll="toggle(.fromLeftIn, .fromLeftOut) once">ScrollTrigger supports vertical and horizontal
            scrolling, check out the <a href="horizontal.html">horizontal demo</a>.</h2>
        <h3 data-scroll="toggle(.fromRightIn, .fromRightOut) once">This block only animates once.</h3>
    </div>
    <div class="block">
        <h1>Open source</h1>
        <h2>The project, with documentation, is on <a href="https://github.com/terwanerik/ScrollTrigger">GitHub</a>.
            Give it some love!</h2>
        <h3>Written by <a href="https://erikterwan.com" target="_blank">Erik Terwan</a></h3>
    </div>

    <script>
     
    </script>

    <link href="https://fonts.googleapis.com/css?family=Work+Sans:200,300,500,700" rel="stylesheet">
</body>

</html>